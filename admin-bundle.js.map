{
  "version": 3,
  "sources": ["ieeevisdb.ts", "auth.ts", "main-admin.ts"],
  "sourcesContent": ["import {Track} from \"./track\";\r\n\r\ndeclare var firebase;\r\n\r\nexport class IeeeVisDb {\r\n    private trackRef: FirebaseRef;\r\n\r\n    constructor(private onData: (track: Track) => void) {\r\n        this.initFirebase();\r\n    }\r\n\r\n    initFirebase() {\r\n        const firebaseConfig = {\r\n            apiKey: \"AIzaSyCfFQ-eN52od55QBFZatFImgZgEDHK_P4E\",\r\n            authDomain: \"ieeevis.firebaseapp.com\",\r\n            databaseURL: \"https://ieeevis-default-rtdb.firebaseio.com\",\r\n            projectId: \"ieeevis\",\r\n            storageBucket: \"ieeevis.appspot.com\",\r\n            messagingSenderId: \"542997735159\",\r\n            appId: \"1:542997735159:web:6d9624111ec276a61fd5f2\",\r\n            measurementId: \"G-SNC8VC6RFM\"\r\n        };\r\n        // Initialize Firebase\r\n        firebase.initializeApp(firebaseConfig);\r\n        firebase.analytics();\r\n    }\r\n\r\n    loadData() {\r\n        this.trackRef = firebase.database().ref('tracks/track1') as FirebaseRef;\r\n\r\n        this.trackRef.on('value', (snapshot) => {\r\n            this.onData(snapshot.val() as Track);\r\n        });\r\n    }\r\n\r\n    set(path: string, value: string|number|{}) {\r\n        this.trackRef.child(path).set(value);\r\n    }\r\n}\r\n\r\ninterface FirebaseRef {\r\n    child: (childName: string) => FirebaseRef;\r\n    set: (value: string|number|{}) => void;\r\n    on: (event: \"value\", cb: (data: any) => void) => void;\r\n}", "import {Track} from \"./track\";\r\n\r\ndeclare var firebase;\r\ndeclare var firebaseui;\r\n\r\nexport class IeeeVisAuth {\r\n    constructor() {\r\n        this.initFirebaseUi();\r\n    }\r\n\r\n    initFirebaseUi() {\r\n        var uiConfig = {\r\n            signInSuccessUrl: 'http://localhost:8080/admin',\r\n            signInOptions: [\r\n                // Leave the lines as is for the providers you want to offer your users.\r\n                firebase.auth.GoogleAuthProvider.PROVIDER_ID,\r\n            ],\r\n            tosUrl: '',\r\n            // Privacy policy url/callback.\r\n            privacyPolicyUrl: ''\r\n        };\r\n\r\n        // Initialize the FirebaseUI Widget using Firebase.\r\n        var ui = new firebaseui.auth.AuthUI(firebase.auth());\r\n        // The start method will wait until the DOM is loaded.\r\n        ui.start('#firebaseui-auth-container', uiConfig);\r\n    }\r\n}\r\n", "import {Track} from \"./track\";\r\nimport {IeeeVisDb} from \"./ieeevisdb\";\r\nimport {IeeeVisAuth} from \"./auth\";\r\n\r\ndeclare var YT;\r\n\r\nclass IeeeVisStreamAdmin {\r\n    data: Track;\r\n    db: IeeeVisDb;\r\n\r\n    constructor() {\r\n        this.db = new IeeeVisDb(this.onData.bind(this));\r\n        this.db.loadData();\r\n\r\n        new IeeeVisAuth();\r\n\r\n        document.getElementById('previous-video-button').onclick = this.previousVideo.bind(this);\r\n        document.getElementById('next-video-button').onclick = this.nextVideo.bind(this);\r\n\r\n        setInterval(this.updateTable.bind(this), 1000);\r\n    }\r\n\r\n    onData(track: Track) {\r\n        this.data = track;\r\n\r\n        document.getElementById('track-title').innerText = this.data.name;\r\n    }\r\n\r\n    updateTable() {\r\n        if(!this.data) {\r\n            return;\r\n        }\r\n\r\n        const tableBody = document.getElementById('videos-table-body') as HTMLTableElement;\r\n        tableBody.innerHTML = '';\r\n\r\n        const currentVideoPlayedMs = new Date().getTime() - this.data.currentStatus.videoStartTimestamp;\r\n\r\n        for(const videoKey in this.data.videos) {\r\n            const video = this.data.videos[videoKey];\r\n            const active = this.data.currentStatus.videoIndex.toString() === videoKey;\r\n            const timePlayed = !active ? '-' : new Date(currentVideoPlayedMs).toISOString().substr(11, 8);\r\n            const ytUrl = `https://www.youtube.com/watch?v=${video.youtubeId}`;\r\n\r\n            const tr = document.createElement('tr');\r\n            tr.className = active ? 'active' : '';\r\n            tr.innerHTML = `\r\n                <td><a href=${ytUrl}\" target=\"_blank\">${video.title}</a></td>\r\n                <td>${video.type}</td>\r\n                <td>${timePlayed}</td>`;\r\n\r\n            tableBody.append(tr);\r\n        }\r\n    }\r\n\r\n    previousVideo() {\r\n        this.updateVideoIndex(this.data.currentStatus.videoIndex - 1);\r\n    }\r\n\r\n    nextVideo() {\r\n        this.updateVideoIndex(this.data.currentStatus.videoIndex + 1);\r\n    }\r\n\r\n    private updateVideoIndex(index: number) {\r\n        this.db.set('currentStatus', {\r\n            videoStartTimestamp: new Date().getTime(),\r\n            videoIndex: index\r\n        });\r\n        /*this.db.set('currentStatus/videoStartTimestamp', new Date().getTime());\r\n        this.db.set('currentStatus/videoIndex', index);*/\r\n        this.data.currentStatus.videoStartTimestamp = new Date().getTime();\r\n        this.data.currentStatus.videoIndex = index;\r\n        this.updateTable();\r\n    }\r\n}\r\n\r\nconst streamAdmin = new IeeeVisStreamAdmin();"],
  "mappings": ";;AAIO,wBAAgB;AAAA,IAGnB,YAAoB,QAAgC;AAAhC;AAChB,WAAK;AAAA;AAAA,IAGT,eAAe;AACX,YAAM,iBAAiB;AAAA,QACnB,QAAQ;AAAA,QACR,YAAY;AAAA,QACZ,aAAa;AAAA,QACb,WAAW;AAAA,QACX,eAAe;AAAA,QACf,mBAAmB;AAAA,QACnB,OAAO;AAAA,QACP,eAAe;AAAA;AAGnB,eAAS,cAAc;AACvB,eAAS;AAAA;AAAA,IAGb,WAAW;AACP,WAAK,WAAW,SAAS,WAAW,IAAI;AAExC,WAAK,SAAS,GAAG,SAAS,CAAC,aAAa;AACpC,aAAK,OAAO,SAAS;AAAA;AAAA;AAAA,IAI7B,IAAI,MAAc,OAAyB;AACvC,WAAK,SAAS,MAAM,MAAM,IAAI;AAAA;AAAA;;;AC/B/B,0BAAkB;AAAA,IACrB,cAAc;AACV,WAAK;AAAA;AAAA,IAGT,iBAAiB;AACb,UAAI,WAAW;AAAA,QACX,kBAAkB;AAAA,QAClB,eAAe;AAAA,UAEX,SAAS,KAAK,mBAAmB;AAAA;AAAA,QAErC,QAAQ;AAAA,QAER,kBAAkB;AAAA;AAItB,UAAI,KAAK,IAAI,WAAW,KAAK,OAAO,SAAS;AAE7C,SAAG,MAAM,8BAA8B;AAAA;AAAA;;;ACnB/C,iCAAyB;AAAA,IAIrB,cAAc;AACV,WAAK,KAAK,IAAI,UAAU,KAAK,OAAO,KAAK;AACzC,WAAK,GAAG;AAER,UAAI;AAEJ,eAAS,eAAe,yBAAyB,UAAU,KAAK,cAAc,KAAK;AACnF,eAAS,eAAe,qBAAqB,UAAU,KAAK,UAAU,KAAK;AAE3E,kBAAY,KAAK,YAAY,KAAK,OAAO;AAAA;AAAA,IAG7C,OAAO,OAAc;AACjB,WAAK,OAAO;AAEZ,eAAS,eAAe,eAAe,YAAY,KAAK,KAAK;AAAA;AAAA,IAGjE,cAAc;AACV,UAAG,CAAC,KAAK,MAAM;AACX;AAAA;AAGJ,YAAM,YAAY,SAAS,eAAe;AAC1C,gBAAU,YAAY;AAEtB,YAAM,uBAAuB,IAAI,OAAO,YAAY,KAAK,KAAK,cAAc;AAE5E,iBAAU,YAAY,KAAK,KAAK,QAAQ;AACpC,cAAM,QAAQ,KAAK,KAAK,OAAO;AAC/B,cAAM,SAAS,KAAK,KAAK,cAAc,WAAW,eAAe;AACjE,cAAM,aAAa,CAAC,SAAS,MAAM,IAAI,KAAK,sBAAsB,cAAc,OAAO,IAAI;AAC3F,cAAM,QAAQ,mCAAmC,MAAM;AAEvD,cAAM,KAAK,SAAS,cAAc;AAClC,WAAG,YAAY,SAAS,WAAW;AACnC,WAAG,YAAY;AAAA,8BACG,0BAA0B,MAAM;AAAA,sBACxC,MAAM;AAAA,sBACN;AAEV,kBAAU,OAAO;AAAA;AAAA;AAAA,IAIzB,gBAAgB;AACZ,WAAK,iBAAiB,KAAK,KAAK,cAAc,aAAa;AAAA;AAAA,IAG/D,YAAY;AACR,WAAK,iBAAiB,KAAK,KAAK,cAAc,aAAa;AAAA;AAAA,IAGvD,iBAAiB,OAAe;AACpC,WAAK,GAAG,IAAI,iBAAiB;AAAA,QACzB,qBAAqB,IAAI,OAAO;AAAA,QAChC,YAAY;AAAA;AAIhB,WAAK,KAAK,cAAc,sBAAsB,IAAI,OAAO;AACzD,WAAK,KAAK,cAAc,aAAa;AACrC,WAAK;AAAA;AAAA;AAIb,MAAM,cAAc,IAAI;",
  "names": []
}
